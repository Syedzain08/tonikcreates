<nav
  class="relative flex items-center justify-between px-6 md:px-12 py-6 z-50 font-primary"
  x-data="{ mobileMenuOpen: false }"
>
  <a href="/" data-umami-event="navbar-home-click" data-umami-event-cta="logo">
    <div class="text-2xl font-black text-yellow-400">
      {{ settings.site_name }}<span class="text-white">.</span>
    </div>
  </a>

  <div class="hidden md:flex items-center gap-8 text-gray-300">
    {% for link in settings.navbar.links %}
    <a
      href="{{ link.url }}"
      class="hover:text-yellow-400 transition-colors"
      data-umami-event="navbar-link-click"
      data-umami-event-link="{{ link.display_text | lower | replace(' ', '-') }}"
      >{{ link.display_text }}</a
    >
    {% endfor %}
    <a
      href="{{ settings.navbar.cta_button.url }}"
      data-umami-event="navbar-cta-click"
      data-umami-event-cta="navbar-cta"
      class="bg-yellow-400 text-black px-6 py-2.5 rounded-full font-semibold hover:bg-yellow-300 transition-colors cursor-pointer shadow-lg shadow-yellow-400/20"
    >
      {{ settings.navbar.cta_button.display_text }}
    </a>
  </div>

  <button
    @click="mobileMenuOpen = !mobileMenuOpen"
    class="md:hidden text-white p-2 focus:outline-none cursor-pointer"
  >
    <span
      class="material-symbols-outlined text-3xl"
      x-text="mobileMenuOpen ? 'close' : 'menu'"
    >
      menu
    </span>
  </button>

  <div
    x-show="mobileMenuOpen"
    x-transition:enter="transition ease-out duration-200"
    x-transition:enter-start="opacity-0 -translate-y-4"
    x-transition:enter-end="opacity-100 translate-y-0"
    class="absolute top-full left-0 right-0 bg-black/95 border-b border-yellow-400/20 py-8 flex flex-col items-center gap-6 md:hidden backdrop-blur-md"
  >
    {% for link in settings.navbar.links %}
    <a
      href="{{ link.url }}"
      data-umami-event="navbar-link-click"
      data-umami-event-link="{{ link.display_text | lower | replace(' ', '-') }}"
      @click="mobileMenuOpen = false"
      class="text-xl text-white hover:text-yellow-400"
      >{{ link.display_text }}</a
    >
    {% endfor %}
    <div class="items-center">
      <a
        href="{{ settings.navbar.cta_button.url }}"
        data-umami-event="navbar-cta-click"
        data-umami-event-cta="navbar-cta"
        @click="mobileMenuOpen = false"
        class="bg-yellow-400 text-black px-8 py-3 rounded-full font-bold w-11/12 max-w-xs hover:cursor-pointer"
      >
        {{ settings.navbar.cta_button.display_text }}
      </a>
    </div>
  </div>
</nav>
<script>
  // Smooth scrolling for anchor links
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      const hash = this.getAttribute("href");

      if (!hash || hash === "#") return;

      const target = document.querySelector(hash);

      if (target) {
        e.preventDefault();

        target.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });

        history.pushState(null, "", hash);
      }
    });
  });
</script>
