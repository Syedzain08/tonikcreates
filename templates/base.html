<!doctype html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="{{ seo.site_description }}" />
    <meta name="keywords" content="{{ seo.site_keywords }}" />

    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script
      defer
      src="https://cloud.umami.is/script.js"
      data-website-id="858185ca-9f6b-40ef-a200-f554b132f07d"
    ></script>
    <link rel="icon" type="image/svg+xml" href="{{ seo.logo }}" />

    <link rel="canonical" href="{{ request.url }}" />

    <!-- Open Graph -->
    <meta property="og:type" content="{{ seo.og.type }}" />
    <meta property="og:title" content="{{ seo.og.title }}" />
    <meta property="og:description" content="{{ seo.og.description }}" />
    <meta property="og:url" content="{{ request.url }}" />
    <meta property="og:image" content="{{ site_url }}{{ seo.og.image }}" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="{{ seo.twitter.card }}" />
    <meta name="twitter:title" content="{{ seo.twitter.title }}" />
    <meta name="twitter:description" content="{{ seo.twitter.description }}" />
    <meta name="twitter:image" content="{{ site_url }}{{ seo.og.image }}" />
    {% if seo.twitter.handle %}
    <meta name="twitter:site" content="{{ seo.twitter.handle }}" />
    {% endif %}

    <!-- Person Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "{{ settings.site_name }}",
        "url": "https://tonikcreates.vercel.app",
        "image": "{{ hero.profile_image }}",
        "jobTitle": "{{ seo.schema.person.job_title }}",
        "description": "{{ hero.description }}",
        "telephone": "{{ settings.phone }}",
        "email": "{{ settings.footer.contact_email }}",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "{{ seo.schema.location.locality }}",
          "addressRegion": "{{ seo.schema.location.region }}",
          "addressCountry": "{{ seo.schema.location.country }}"
        },
        "knowsAbout": {{ seo.schema.person.knows_about | tojson }},
        "hasOccupation": {
          "@type": "Occupation",
          "name": "Video Editor",
          "occupationalCategory": "27-4032.00"
        },
        "offers": {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Professional Video Editing Services",
            "serviceType": {{ seo.schema.person.service_types | tojson }}
          },
          "areaServed": {
            "@type": "Place",
            "name": "{{ seo.schema.person.area_served }}"
          }
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ seo.schema.rating.value }}",
          "reviewCount": "{{ seo.schema.rating.count }}"
        },
        "sameAs": [
          "{{ settings.footer.socials.upwork }}",
          "{{ settings.footer.socials.instagram }}",
          "{{ settings.footer.socials.x_twitter }}"
        ]
      }
    </script>

    <meta name="theme-color" content="{{ seo.theme_color }}" />

    <style>
      .swiper-button-next,
      .swiper-button-prev {
        color: #fde047;
      }

      .swiper-pagination-bullet {
        background-color: #fde047;
        opacity: 0.5;
      }

      .swiper-pagination-bullet-active {
        opacity: 1;
      }
    </style>

    {% block head %}{% endblock %}

    <title>{% block title %}{% endblock %} - {{ settings.site_name }}</title>
  </head>
  <body class="font-primary bg-black text-white min-h-screen overflow-x-hidden">
    {% include 'partials/navbar.html' %} {% block content %}{% endblock %} {%
    include 'partials/footer.html' %}
  </body>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const swiper = new Swiper(".portfolioSwiper", {
        slidesPerView: 1,
        spaceBetween: 20,
        loop: true,
        centeredSlides: false,

        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },

        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },

        breakpoints: {
          640: {
            slidesPerView: 2,
            spaceBetween: 20,
          },

          768: {
            slidesPerView: 3,
            spaceBetween: 25,
          },
        },

        speed: 600,

        keyboard: {
          enabled: true,
        },

        mousewheel: {
          forceToAxis: true,
        },
      });

      document.querySelectorAll(".swiper-slide").forEach((slide) => {
        slide.addEventListener("click", function () {
          const img = this.querySelector("img");
          const thumbnailUrl = img.src;
          const videoId = thumbnailUrl.match(/\/vi_webp\/([^/]+)\//)[1];

          const iframe = document.createElement("iframe");
          iframe.className = "absolute inset-0 w-full h-full";
          iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
          iframe.frameBorder = "0";
          iframe.allow =
            "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
          iframe.setAttribute("allowfullscreen", "");
          iframe.allowFullscreen = true;

          const container = this.querySelector(".relative");
          container.innerHTML = "";
          container.appendChild(iframe);
        });
      });
    });
  </script>
  {% block scripts %}{% endblock %}
</html>
