<!doctype html>
<html lang="en">
  <head>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/main.css') }}"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />

    <style>
      .swiper-button-next,
      .swiper-button-prev {
        color: #fde047;
      }

      .swiper-pagination-bullet {
        background-color: #fde047;
        opacity: 0.5;
      }

      .swiper-pagination-bullet-active {
        opacity: 1;
      }
    </style>

    {% block head %}{% endblock %}

    <title>{% block title %}{% endblock %} - T0N1K</title>
  </head>
  <body class="font-primary bg-black text-white min-h-screen overflow-x-hidden">
    {% include 'partials/navbar.html' %} {% block content %}{% endblock %}{%
    include 'partials/footer.html' %}
  </body>
  <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const swiper = new Swiper(".educationalSwiper", {
        slidesPerView: 1,
        spaceBetween: 20,
        loop: true,
        centeredSlides: false,

        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },

        pagination: {
          el: ".swiper-pagination",
          clickable: true,
        },

        breakpoints: {
          640: {
            slidesPerView: 2,
            spaceBetween: 20,
          },

          768: {
            slidesPerView: 3,
            spaceBetween: 25,
          },
        },

        speed: 600,

        keyboard: {
          enabled: true,
        },

        mousewheel: {
          forceToAxis: true,
        },
      });

      document.querySelectorAll(".swiper-slide").forEach((slide) => {
        slide.addEventListener("click", function () {
          // Get the video ID from the thumbnail src
          const img = this.querySelector("img");
          const thumbnailUrl = img.src;
          const videoId = thumbnailUrl.match(/\/vi\/([^/]+)\//)[1];

          // Create iframe
          const iframe = document.createElement("iframe");
          iframe.className = "absolute inset-0 w-full h-full";
          iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
          iframe.frameBorder = "0";
          iframe.allow =
            "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
          iframe.allowFullscreen = true;

          // Replace content with iframe
          const container = this.querySelector(".relative");
          container.innerHTML = "";
          container.appendChild(iframe);
        });
      });
    });
  </script>
  {% block scripts %}{% endblock %}
</html>
